<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8" />

        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>Document</title>
      </head>
      <body>
        <style>
          section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
          }
          article {
            border: 3px solid olive;
            border-radius: 10px;
          }
          img {
            width: 100%;
            border-radius: 10px;
          }
          .info {
            padding: 0 1rem;
          }
          #modal {
            display: none;
            position: fixed;

            width: 100vw;
            height: 100vh;

            background-color: #00000055;
          }
          #modal article {
            max-width: 900px;
            margin: auto;
            background-color: white;
          }
        </style>
        <h1>Bistro Babushka</h1>

        <nav class="filter">
          <button data-kategori="alle" class="valgte">alle</button>

          <button data-kategori="forretter">forretter</button>

          <button data-kategori="hovedretter">hovedretter</button>

          <button data-kategori="desserter">desserter</button>

          <button data-kategori="drikkevarer">drikkevarer</button>
          <button data-kategori="sideorders">sideorders</button>
        </nav>

        <aside id="modal">
          <article>
            <h2></h2>
            <img src="" alt="" />
            <p></p>
            <p></p>
          </article>
        </aside>
        <section></section>
        <template>
          <article>
            <img src="" alt="" />
            <h2></h2>
            <div class="info">
              <p class="kategori"></p>
              <p class="navn"></p>
              <p class="kortbeskrivelse"></p>
              <p class="pris"></p>
            </div>
          </article>
        </template>

        <script>
          /*    const section = document.querySelector("section");
                   const temp = document.querySelector("template"); */
          const modal = document.querySelector("#modal");
          const nav = document.querySelector("nav");
          const url = "https://babushka-dd8a.restdb.io/rest/menu";
          const key = "600ec2fb1346a1524ff12de4";

          const options = {
            headers: { "x-apikey": "600ec2fb1346a1524ff12de4" },
          };
          let retter;
          let filter = "alle";

          async function hentData() {
            const respons = await fetch(url, options);
            retter = await respons.json();
            filterMenu();
          }

          hentData();

          function filtrerRetter() {
            filter = this.dataset.kategori;
            console.log("filter", filter);
            filterMenu();
            header.textContent = this.textContent;
          }

          function filterMenu() {
            const section = document.querySelector("section");
            const temp = document.querySelector("template");
            section.textContent = "";

            retter.forEach((mad) => {
              console.log("kategori", mad.kategori);
              if (filter == mad.kategori || filter == "alle") {
                const klon = temp.cloneNode(true).content;
                klon.querySelector(
                  "img"
                ).src = `medium/${mad.billednavn}-md.jpg`;

                klon.querySelector(
                  "h2"
                ).textContent = `${mad.navn} ${mad.pris}`;
                klon.querySelector(
                  ".kategori"
                ).textContent = `kategori: ${mad.kategori}`;
                klon.querySelector(
                  ".kortbeskrivelse"
                ).textContent = ` ${mad.kortbeskrivelse}`;
                klon.querySelector(".navn").textContent = `navn: ${mad.navn}`;
                klon.querySelector(".pris").textContent = `pris: ${mad.pris}`;
                klon
                  .querySelector("img")
                  .addEventListener("click", () => visDetaljer(mad));
                section.appendChild(klon);
              }
            });
          }
          function filtrer() {
            console.log(this.textContent);
            filter = thid.textContent;
            section.textContent = "";
          }

          function visDetaljer(mad) {
            console.log(mad);
            modal.querySelector("h2").textContent = mad.navn;
            modal.querySelector("img").src = `medium/${mad.billednavn}-md.jpg`;
            modal.style.display = "block";
          }
          modal.addEventListener("click", () => (modal.style.display = "none"));
          hentData();
        </script>
      </body>
    </html>
  </body>
</html>
